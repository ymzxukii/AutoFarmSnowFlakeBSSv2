-- My Discord: death_1497

local path = workspace:WaitForChild("Particles"):WaitForChild("Snowflakes")
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local info = "Please Take Caution when AutoFarming Snowflakes overnight!"
local autofarmEnabled = true
local collectTime = 2.5
local waitTimeBetweenSnowflakes = 4
local collectedCount = 0

-- Utility functions
local function chatmsg(t, c)
    game.StarterGui:SetCore("ChatMakeSystemMessage", {
        Text = t;
        Color = c
    })
end

local function notif(ti, tx, du)
    game.StarterGui:SetCore("SendNotification", {
        Title = ti;
        Text = tx;
        Duration = du;
    })
end

local function playSound(soundId)
    local sound = Instance.new("Sound")
    sound.SoundId = soundId
    sound.Parent = player.PlayerGui
    sound:Play()
    task.wait(1)
    sound:Destroy()
end

-- Initial notifications
chatmsg(info, Color3.fromRGB(107, 170, 253))
notif("Autofarm", info, 5)
notif("Autofarm", "Sometimes snowflakes won't collect if you're laggy", 5)

function getsnowflake()
    local snowflakes = path:GetChildren()
    if #snowflakes > 0 then
        return snowflakes[math.random(1, #snowflakes)]
    else
        notif("Autofarm", "No SnowFlakes Found", 5)
        task.wait(0.1)
        return getsnowflake()
    end
end

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
local toggleButton = Instance.new("TextButton")
local collectedLabel = Instance.new("TextLabel")
local frame = Instance.new("Frame")
local uicorner = Instance.new("UICorner")

screenGui.Parent = player:WaitForChild("PlayerGui")

-- Main Frame
frame.Parent = screenGui
frame.Size = UDim2.new(0, 250, 0, 120) -- Reduced size
frame.Position = UDim2.new(0, 10, 0.5, -60) -- Positioned on the far middle left
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.BackgroundTransparency = 0.3

-- Rounded Corners
uicorner.CornerRadius = UDim.new(0, 15)
uicorner.Parent = frame

-- Toggle Button
toggleButton.Parent = frame
toggleButton.Size = UDim2.new(0, 120, 0, 40) -- Adjusted size
toggleButton.Position = UDim2.new(0.5, -60, 0.5, -20) -- Centered within the frame
toggleButton.Text = "Stop Autofarm"
toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.TextSize = 18
toggleButton.Font = Enum.Font.GothamBold

local toggleUICorner = Instance.new("UICorner")
toggleUICorner.CornerRadius = UDim.new(0, 10)
toggleUICorner.Parent = toggleButton

toggleButton.MouseButton1Click:Connect(function()
    autofarmEnabled = not autofarmEnabled
    if autofarmEnabled then
        toggleButton.Text = "Stop Autofarm"
        toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    else
        toggleButton.Text = "Start Autofarm"
        toggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    end
end)

-- Collected Snowflakes Label
collectedLabel.Parent = frame
collectedLabel.Size = UDim2.new(0, 200, 0, 40) -- Adjusted size
collectedLabel.Position = UDim2.new(0.5, -100, 0, 10) -- Centered within the frame
collectedLabel.Text = "Collected: 0"
collectedLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
collectedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
collectedLabel.TextSize = 20
collectedLabel.Font = Enum.Font.GothamBold
collectedLabel.TextStrokeTransparency = 0.5

local collectedUICorner = Instance.new("UICorner")
collectedUICorner.CornerRadius = UDim.new(0, 10)
collectedUICorner.Parent = collectedLabel

-- Main loop
while true do
    if autofarmEnabled then
        character = player.Character or player.CharacterAdded:Wait()
        notif("Autofarm", "Collecting Snowflake", 2.5)
        local selectedsnowflake = getsnowflake()
        local collecttick = tick()
        repeat
            task.wait()
            character.HumanoidRootPart.CFrame = selectedsnowflake.CFrame + Vector3.new(0, 15, 0)
            character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        until (tick() - collecttick > collectTime)
        collectedCount = collectedCount + 1
        collectedLabel.Text = "Collected: " .. collectedCount
        playSound("rbxassetid://12345678") -- Replace with actual sound ID
        task.wait(waitTimeBetweenSnowflakes) -- Wait time between collections
    else
        task.wait(1) -- Wait time when autofarm is disabled
    end
end
